<html>
  <head>
    <meta charset="utf8">
    <title>Enhanced Fetch() Progress Indicator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/png" />
    <link rel="stylesheet" type="text/css" href="app.css">
  </head>
  <body>
    <main>
      <div class="loader" id="loader">
        <div id="image" class="image x40-21"><div class="progress-bar" id="progress-bar"><div class="progress" id="progress"></div></div><img id="img" src=""></div>
        <div class="btn btn-restart"><a href="javascript:imageLoader.startDownload()">Restart</a></div>
        <div class="btn btn-stop"><a href="javascript:imageLoader.stopDownload()">Stop</a></div>
        <div id="error" class="error"></div>
      </div>
      <p>
        This example shows a progress bar while a remote image is downloaded with a declarative <code>fetch()</code> request.
        Users probably prefer seeing images load progressively with inline <code>&lt;img&gt;</code> tags, and
        progress bars may be better suited for larger, non-image <code>fetch()</code> requests.
      </p>
      <p>
        The future Service Worker example will show progress bars for inline images loading
        naturally with <code>&lt;img&gt;</code> tags.
      </p>
    </main>
    <footer>
      <a href="../">Home</a>
      <a href="https://github.com/AnthumChris/fetch-progress-indicators">View on GitHub</a>
    </footer>

    <script>
      // Ensure unsupported browsers don't load invalid JS (e.g. ES6, Promises), compile successfully, and show errors
      if (!(window.fetch && window.ReadableStream)) {
        document.getElementsByTagName('main')[0].innerHTML = '<div style="margin-top: 2rem; color: #fff;">Fetch or ReadableStream API is not supported in this browser.<br><br>This demo cannot function without them.</div>'
      } else {
        var script = document.createElement('script');
        script.src = 'supported-browser.js';
        document.body.append(script);
      }
    </script>
  </body>
</html>
